<img width="1470" height="751" alt="image" src="https://github.com/user-attachments/assets/d9bcdcea-7985-4529-bb62-6e6086b28544" /># Anonymous Personal Feedback & Evaluation System

## ğŸ“‹ à¸ à¸²à¸à¸£à¸§à¸¡à¸£à¸°à¸šà¸š
<img width="1470" height="751" alt="image" src="https://github.com/user-attachments/assets/84f0ba58-c797-4adf-b154-57d781a11871" />
<img width="1470" height="752" alt="image" src="https://github.com/user-attachments/assets/7dee6eb6-6b52-4105-8c4c-82f4df73f7e1" />
<img width="1470" height="750" alt="image" src="https://github.com/user-attachments/assets/c9786c05-d33c-4a6d-9c46-65c2573b070c" />
<img width="1470" height="753" alt="image" src="https://github.com/user-attachments/assets/9449845b-d6ca-41de-8043-1340be5257a1" />
<img width="462" height="917" alt="image" src="https://github.com/user-attachments/assets/b3b25587-11eb-4266-aad4-4c9ae95d2203" />


à¸£à¸°à¸šà¸šà¸›à¸£à¸°à¹€à¸¡à¸´à¸™à¹à¸šà¸šà¹„à¸¡à¹ˆà¸£à¸°à¸šà¸¸à¸•à¸±à¸§à¸•à¸™ (Anonymous Feedback/Evaluation System) à¸—à¸µà¹ˆà¸­à¸­à¸à¹à¸šà¸šà¸ªà¸³à¸«à¸£à¸±à¸šà¸à¸²à¸£à¸›à¸£à¸°à¹€à¸¡à¸´à¸™à¸œà¸¥à¹ƒà¸™à¸—à¸µà¸¡à¸«à¸£à¸·à¸­à¸­à¸‡à¸„à¹Œà¸à¸£ à¹‚à¸”à¸¢à¸¡à¸µà¸„à¸§à¸²à¸¡à¹€à¸›à¹‡à¸™à¸ªà¹ˆà¸§à¸™à¸•à¸±à¸§à¸ªà¸¹à¸‡à¸ªà¸¸à¸”à¹à¸¥à¸°à¸„à¸§à¸²à¸¡à¸›à¸¥à¸­à¸”à¸ à¸±à¸¢

### ğŸ¯ à¸§à¸±à¸•à¸–à¸¸à¸›à¸£à¸°à¸ªà¸‡à¸„à¹Œà¸«à¸¥à¸±à¸
- à¸›à¸£à¸°à¹€à¸¡à¸´à¸™à¹à¸šà¸šà¹„à¸¡à¹ˆà¸£à¸°à¸šà¸¸à¸•à¸±à¸§à¸•à¸™ (Anonymous)
- à¸£à¸­à¸‡à¸£à¸±à¸š 2 à¸£à¸¹à¸›à¹à¸šà¸š Token Policy:
  - **Multi-candidate**: à¹ƒà¸Šà¹‰ Token à¹€à¸”à¸µà¸¢à¸§à¸›à¸£à¸°à¹€à¸¡à¸´à¸™à¸«à¸¥à¸²à¸¢à¸„à¸™à¹„à¸”à¹‰
  - **Single-use**: Token à¹ƒà¸Šà¹‰à¹„à¸”à¹‰à¸„à¸£à¸±à¹‰à¸‡à¹€à¸”à¸µà¸¢à¸§ (à¸ªà¸³à¸«à¸£à¸±à¸š Bulk Generate)
- à¸œà¸¹à¹‰à¸–à¸¹à¸à¸›à¸£à¸°à¹€à¸¡à¸´à¸™à¸ªà¸²à¸¡à¸²à¸£à¸–à¸”à¸¹à¸œà¸¥à¸‚à¸­à¸‡à¸•à¸±à¸§à¹€à¸­à¸‡à¹„à¸”à¹‰à¹€à¸—à¹ˆà¸²à¸™à¸±à¹‰à¸™
- Admin à¸ªà¸²à¸¡à¸²à¸£à¸–à¸ˆà¸±à¸”à¸à¸²à¸£à¸à¸²à¸£à¸›à¸£à¸°à¹€à¸¡à¸´à¸™à¹à¸¥à¸°à¸”à¸¹à¸œà¸¥à¸£à¸§à¸¡
- à¸£à¸­à¸‡à¸£à¸±à¸š 2 à¸ à¸²à¸©à¸²: à¹„à¸—à¸¢ à¹à¸¥à¸° à¸­à¸±à¸‡à¸à¸¤à¸©

---

## ğŸ—ï¸ System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    AnonymousPersonal System                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Frontend (React)  â”‚         â”‚  Backend (Node.js)   â”‚   â”‚
â”‚  â”‚  Port: 5173        â”‚â—„â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚  Port: 5001          â”‚   â”‚
â”‚  â”‚  - Voting Page     â”‚         â”‚  - Express API       â”‚   â”‚
â”‚  â”‚  - Results Page    â”‚         â”‚  - Token Auth        â”‚   â”‚
â”‚  â”‚  - Admin Panel     â”‚         â”‚  - Vote Logic        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                           â–²                 â”‚
â”‚                                           â”‚                 â”‚
â”‚                                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚                                  â”‚  PostgreSQL DB    â”‚     â”‚
â”‚                                  â”‚  - surveys        â”‚     â”‚
â”‚                                  â”‚  - candidates     â”‚     â”‚
â”‚                                  â”‚  - voter_tokens   â”‚     â”‚
â”‚                                  â”‚  - votes          â”‚     â”‚
â”‚                                  â”‚  - admin_users    â”‚     â”‚
â”‚                                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š User Roles & Flows

### 1. **Evaluator (à¸œà¸¹à¹‰à¸›à¸£à¸°à¹€à¸¡à¸´à¸™)**
```
Token â”€â”€â–º Enter Voting Page â”€â”€â–º Select Candidate â”€â”€â–º Select Strengths
                                                 â”œâ”€ Select Weaknesses
                                                 â”œâ”€ Add Comment (Optional)
                                                 â””â”€ Submit Evaluation
```

### 2. **Candidate (à¸œà¸¹à¹‰à¸–à¸¹à¸à¸›à¸£à¸°à¹€à¸¡à¸´à¸™)**
```
Candidate Token â”€â”€â–º View Results Page â”€â”€â–º See Your Feedback
                                         â”œâ”€ Strengths Chart
                                         â”œâ”€ Weaknesses Chart
                                         â””â”€ Anonymous Comments
```

### 3. **Admin (à¸œà¸¹à¹‰à¸”à¸¹à¹à¸¥)**
```
Login â”€â”€â–º Dashboard â”€â”€â–º Survey Management â”€â”€â–º Token Management
                              â”‚                      â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Create/Edit Survey â”‚   â”‚ Bulk Generateâ”‚
                    â”‚ Add Candidates     â”‚   â”‚ View Tokens  â”‚
                    â”‚ Feedback Options   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Survey Results    â”‚
                    â”‚  View All Feedback â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ Folder Structure

```
AnonymousPersonal/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â”‚   â””â”€â”€ database.js
â”‚   â”‚   â”œâ”€â”€ controllers/
â”‚   â”‚   â”‚   â”œâ”€â”€ surveyController.js
â”‚   â”‚   â”‚   â”œâ”€â”€ voteController.js
â”‚   â”‚   â”‚   â””â”€â”€ adminController.js
â”‚   â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â”‚   â”œâ”€â”€ surveys.js
â”‚   â”‚   â”‚   â”œâ”€â”€ votes.js
â”‚   â”‚   â”‚   â”œâ”€â”€ admin.js
â”‚   â”‚   â”‚   â””â”€â”€ publicSurveys.js
â”‚   â”‚   â”œâ”€â”€ middleware/
â”‚   â”‚   â”‚   â”œâ”€â”€ tokenAuth.js
â”‚   â”‚   â”‚   â””â”€â”€ adminAuth.js
â”‚   â”‚   â””â”€â”€ app.js
â”‚   â”œâ”€â”€ .env.example
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ server.js
â”‚
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”‚   â”œâ”€â”€ VotingPage.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ ResultsPage.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ AdminDashboard.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ AdminLogin.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ AdminTokens.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ AdminSurveyResults.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ SurveyManagement.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ TokenManagementDashboard.jsx
â”‚   â”‚   â”‚   â””â”€â”€ FeedbackOptionsManagement.jsx
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ TokenInput.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ VotingForm.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ ResultsChart.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ AdminNavMenu.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ LanguageSwitcher.jsx
â”‚   â”‚   â”‚   â””â”€â”€ ProtectedAdminRoute.jsx
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â””â”€â”€ api.js
â”‚   â”‚   â”œâ”€â”€ context/
â”‚   â”‚   â”‚   â””â”€â”€ AuthContext.jsx
â”‚   â”‚   â”œâ”€â”€ locales/
â”‚   â”‚   â”‚   â”œâ”€â”€ en.json
â”‚   â”‚   â”‚   â””â”€â”€ th.json
â”‚   â”‚   â”œâ”€â”€ styles/
â”‚   â”‚   â”‚   â””â”€â”€ *.css
â”‚   â”‚   â”œâ”€â”€ i18n.js
â”‚   â”‚   â”œâ”€â”€ App.jsx
â”‚   â”‚   â””â”€â”€ main.jsx
â”‚   â”œâ”€â”€ index.html
â”‚   â”œâ”€â”€ vite.config.js
â”‚   â””â”€â”€ package.json
â”‚
â”œâ”€â”€ database/
â”‚   â”œâ”€â”€ init.sql
â”‚   â””â”€â”€ migrations/
â”‚       â”œâ”€â”€ 2025-12-31_token_policy.sql
â”‚       â””â”€â”€ 2025-12-31_voter_tokens.sql
â”‚
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ ARCHITECTURE.md
â”‚   â”œâ”€â”€ DATABASE_SCHEMA.md
â”‚   â”œâ”€â”€ API_DOCUMENTATION.md
â”‚   â”œâ”€â”€ DEPLOYMENT.md
â”‚   â””â”€â”€ MULTILINGUAL.md
â”‚
â”œâ”€â”€ DATABASE_SETUP.md
â”œâ”€â”€ QUICKSTART.md
â”œâ”€â”€ USER_GUIDE_TH.md
â”œâ”€â”€ USER_GUIDE_EN.md
â””â”€â”€ README.md
```

---

## ğŸ—„ï¸ Database Schema

### Tables

**1. surveys**
| Column | Type | Description |
|--------|------|-------------|
| id | UUID | Primary Key |
| title | VARCHAR | Survey name |
| description | TEXT | Survey description |
| status | VARCHAR | draft / active / closed |
| token_policy | VARCHAR | multi_candidate / single_use |
| expires_at | TIMESTAMP | Expiration date |
| created_by | UUID | Admin who created |
| created_at | TIMESTAMP | Creation time |

**2. candidates**
| Column | Type | Description |
|--------|------|-------------|
| id | UUID | Primary Key |
| survey_id | UUID | FK to surveys |
| name | VARCHAR | Candidate name |
| employee_id | VARCHAR | Employee ID (optional) |
| department | VARCHAR | Department (optional) |
| access_token_hash | VARCHAR | Hashed access token |

**3. voter_tokens**
| Column | Type | Description |
|--------|------|-------------|
| id | UUID | Primary Key |
| survey_id | UUID | FK to surveys |
| candidate_id | UUID | FK to candidates (nullable) |
| token_hash | VARCHAR | Hashed token value |
| is_used | BOOLEAN | Whether token is used |
| used_at | TIMESTAMP | When token was used |

**4. feedback_options**
| Column | Type | Description |
|--------|------|-------------|
| id | UUID | Primary Key |
| survey_id | UUID | FK to surveys |
| type | VARCHAR | strength / weakness |
| option_text | VARCHAR | Feedback option text |

**5. votes**
| Column | Type | Description |
|--------|------|-------------|
| id | UUID | Primary Key |
| survey_id | UUID | FK to surveys |
| candidate_id | UUID | FK to candidates |
| strength_ids | JSONB | Array of selected strengths |
| weakness_ids | JSONB | Array of selected weaknesses |
| feedback_text | TEXT | Optional comment |
| *Note: NO voter identification stored* |

**6. admin_users**
| Column | Type | Description |
|--------|------|-------------|
| id | UUID | Primary Key |
| username | VARCHAR | Admin username |
| password_hash | VARCHAR | Hashed password |

---

## ğŸ”‘ Key Security Features

âœ… **No Personal Data Stored**
- Tokens are hashed (bcrypt) before storage
- No voter identification in votes table
- Anonymous voting guaranteed

âœ… **Token Policy Options**
- Multi-candidate: One token, vote for multiple people
- Single-use: One token, one vote (for bulk generation)

âœ… **Role-Based Access Control**
- Token Auth: Voters & Candidates
- Admin Auth: JWT-based session management

âœ… **Data Privacy**
- Candidates only see their own results
- Voters can't see other's votes
- Admin can view all survey results

---

## ğŸš€ Getting Started

### Prerequisites
- Node.js (v16+)
- PostgreSQL (v12+)
- npm

### Quick Start

```bash
# 1. Setup Database
createdb anonymous_voting_db
psql -d anonymous_voting_db < database/init.sql
psql -d anonymous_voting_db < database/migrations/2025-12-31_token_policy.sql
psql -d anonymous_voting_db < database/migrations/2025-12-31_voter_tokens.sql

# 2. Backend Setup
cd backend
npm install
cp .env.example .env
# Edit .env with your database credentials
npm start

# 3. Frontend Setup (new terminal)
cd frontend
npm install
npm run dev
```

### Access URLs
- Frontend: http://localhost:5173
- Backend API: http://localhost:5001
- Admin Login: http://localhost:5173/admin/login

---

## ğŸ“¡ API Endpoints

### Vote Endpoints
| Method | Endpoint | Description |
|--------|----------|-------------|
| POST | /api/votes | Submit a vote |
| GET | /api/votes/status | Check vote status |
| GET | /api/votes/my-candidate-results | Get candidate's own results |

### Survey Endpoints (Public)
| Method | Endpoint | Description |
|--------|----------|-------------|
| GET | /api/surveys/:id/public | Get survey details for voting |

### Admin Endpoints
| Method | Endpoint | Description |
|--------|----------|-------------|
| POST | /api/admin/login | Admin login |
| GET | /api/admin/surveys | List all surveys |
| POST | /api/admin/surveys | Create survey |
| PUT | /api/admin/surveys/:id | Update survey |
| DELETE | /api/admin/surveys/:id | Delete survey |
| GET | /api/admin/surveys/:id/results | Get survey results |
| POST | /api/admin/tokens/generate | Generate tokens |
| POST | /api/admin/tokens/bulk-generate | Bulk generate tokens |

---

## ğŸ› ï¸ Tech Stack

| Layer | Technology |
|-------|-----------|
| **Frontend** | React 18 + Vite |
| **Backend** | Node.js + Express |
| **Database** | PostgreSQL |
| **Auth** | JWT + bcrypt Token Hash |
| **Charts** | Chart.js |
| **i18n** | i18next |
| **Styling** | Custom CSS |

---

## ğŸ“ Environment Variables

### Backend (.env)
```
PORT=5001
NODE_ENV=development

# Database
DB_HOST=localhost
DB_PORT=5432
DB_NAME=anonymous_voting_db
DB_USER=voting_user
DB_PASSWORD=your_password

# JWT
JWT_SECRET=your-jwt-secret
JWT_EXPIRES_IN=7d

# CORS
CORS_ORIGIN=http://localhost:5173
```

---

## ğŸŒ Multilingual Support

The system supports **Thai (à¹„à¸—à¸¢)** and **English** with a language switcher button (ğŸŒ) in the navigation bar.

- Translation files: `frontend/src/locales/en.json`, `th.json`
- Default language: Thai
- Preference saved to localStorage

---

## ğŸ“– Documentation

| Document | Description |
|----------|-------------|
| [QUICKSTART.md](./QUICKSTART.md) | Step-by-step setup guide |
| [DATABASE_SETUP.md](./DATABASE_SETUP.md) | Database setup instructions |
| [USER_GUIDE_TH.md](./USER_GUIDE_TH.md) | Thai user guide |
| [USER_GUIDE_EN.md](./USER_GUIDE_EN.md) | English user guide |
| [docs/ARCHITECTURE.md](./docs/ARCHITECTURE.md) | System architecture |
| [docs/API_DOCUMENTATION.md](./docs/API_DOCUMENTATION.md) | Full API reference |
| [docs/DATABASE_SCHEMA.md](./docs/DATABASE_SCHEMA.md) | Database schema details |
| [docs/DEPLOYMENT.md](./docs/DEPLOYMENT.md) | Production deployment |

---

## âœ… Features Checklist

- [x] Anonymous voting (no personal data stored)
- [x] Multi-candidate token policy
- [x] Single-use token policy (bulk generation)
- [x] Voters can't see other's votes
- [x] Candidates see only their own results
- [x] Admin dashboard with full survey management
- [x] Bulk token generation
- [x] Survey results report with visual charts
- [x] Thai and English language support
- [x] Secure token handling (bcrypt hashing)
- [x] Session expiry handling
- [x] Responsive UI design

---

**Version**: 2.0.0  
**Last Updated**: January 2026
